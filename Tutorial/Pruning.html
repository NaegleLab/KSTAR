
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Run pruning within python &#8212; KSTAR 1 documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/classic.css" />
    
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Map Datasets to KinPred" href="Activity_Calculation.html" />
    <link rel="prev" title="Tutorial" href="tutorial.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="Activity_Calculation.html" title="Map Datasets to KinPred"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="tutorial.html" title="Tutorial"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">KSTAR 1 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="tutorial.html" accesskey="U">Tutorial</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Run pruning within python</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <p>The prune class and accompanying functions was created for the process of generating the heuristically pruned networks that KSTAR bases its
predictions on. Pruning can either be run within a python environment/interpreter, or they can be run using a bash script from the command line.</p>
<div class="tex2jax_ignore mathjax_ignore section" id="run-pruning-within-python">
<h1>Run pruning within python<a class="headerlink" href="#run-pruning-within-python" title="Permalink to this headline">¶</a></h1>
<p>The prune class and accompanying functions was created for the process of generating the heuristically pruned networks that KSTAR bases its
predictions on. If wanting to run pruning in python, see below:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1">#load necesary packages</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">from</span> <span class="nn">kstar.prune</span> <span class="kn">import</span> <span class="n">run_pruning</span><span class="p">,</span> <span class="n">save_pruning</span><span class="p">,</span> <span class="n">save_run_information</span>
<span class="kn">from</span> <span class="nn">kstar</span> <span class="kn">import</span> <span class="n">config</span>

<span class="c1">#Load networks and define parameters used during the pruning run</span>
<span class="n">network_file</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">config</span><span class="o">.</span><span class="n">NETWORK_DIR</span><span class="si">}</span><span class="s1">/network_file_name.csv&#39;</span>
<span class="n">network</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">network_file</span><span class="p">)</span>

<span class="c1">#set other parameters </span>
<span class="n">phospho_type</span> <span class="o">=</span> <span class="s1">&#39;Y&#39;</span>    <span class="c1">#type of phosphomodification to generate networks for (&#39;Y&#39;, &#39;ST&#39;)</span>
<span class="n">kinase_size</span> <span class="o">=</span> <span class="mi">2000</span>     <span class="c1">#minimum number of substrates all kinases must be connected to</span>
<span class="n">site_limit</span> <span class="o">=</span> <span class="mi">10</span>       <span class="c1">#maximum number of kinases a particular substrate can be connected to</span>
<span class="n">num_networks</span> <span class="o">=</span> <span class="mi">50</span>     <span class="c1">#number of pruned networks to generate</span>
<span class="n">network_id</span> <span class="o">=</span> <span class="s1">&#39;NetworKIN&#39;</span>
<span class="n">odir</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;./prune/results&quot;</span> <span class="c1">#where the final pruned networks should be saved</span>
<span class="n">PROCESSES</span> <span class="o">=</span> <span class="mi">4</span>		<span class="c1">#number of cores to use (&gt; 1 for multiprocessing)</span>
<span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Beginning to build pruning networks&quot;</span><span class="p">)</span>
<span class="c1">#run and save pruning</span>
<span class="n">pruner</span> <span class="o">=</span> <span class="n">run_pruning</span><span class="p">(</span><span class="n">network</span><span class="p">,</span> <span class="n">log</span><span class="p">,</span> <span class="n">use_compendia</span><span class="p">,</span> <span class="n">phospho_type</span><span class="p">,</span> <span class="n">kinase_size</span><span class="p">,</span> <span class="n">site_limit</span><span class="p">,</span> <span class="n">num_networks</span><span class="p">,</span> <span class="n">network_id</span><span class="p">,</span> <span class="n">odir</span><span class="p">,</span> <span class="n">PROCESSES</span><span class="p">)</span>
<span class="n">save_pruning</span><span class="p">(</span><span class="n">phospho_type</span><span class="p">,</span> <span class="n">network_id</span><span class="p">,</span> <span class="n">kinase_size</span><span class="p">,</span> <span class="n">site_limit</span><span class="p">,</span> <span class="n">use_compendia</span><span class="p">,</span> <span class="n">odir</span><span class="p">,</span> <span class="n">log</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="tex2jax_ignore mathjax_ignore section" id="run-pruning-from-the-command-line">
<h1>Run pruning from the command line<a class="headerlink" href="#run-pruning-from-the-command-line" title="Permalink to this headline">¶</a></h1>
<p>It is also possible to run the pruning procedure from start to finish, including saving the results and run info, from the command line.
A bash script like the one below can be used to run prune.py and input the necessary parameters.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>export KSTAR_DIR = /repo_loc/KSTAR/
cd $KSTAR_DIR

python /kstar/prune/prune.py \
--network_file /RESOURCE_FILES/NetworKIN/NetworKIN_2020-02-26_all_matrix.csv \
--output_directory /prune/results \
--phospho_type Y \
--kinase_size  2000 \
--site_limit 10 \
--num_networks 50 \
--network_id NetworKIN \
--use_compendia yes 
</pre></div>
</div>
</div>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">Table of Contents</a></h3>
  <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../Overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Dependencies.html">Dependencies</a></li>
<li class="toctree-l1"><a class="reference internal" href="../KSTAR.html">KSTAR</a></li>
<li class="toctree-l1"><a class="reference internal" href="../quickstart.html">Getting Started</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="tutorial.html">Tutorial</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="tutorial.html#network-generation">Network Generation</a><ul class="current">
<li class="toctree-l3 current"><a class="current reference internal" href="#">Run pruning within python</a></li>
<li class="toctree-l3"><a class="reference internal" href="#run-pruning-from-the-command-line">Run pruning from the command line</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="tutorial.html#activity-prediction">Activity Prediction</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../Examples/Examples.html">Analysis Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Parallel/parallel.html">KSTAR in Parallel</a></li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="tutorial.html"
                        title="previous chapter">Tutorial</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="Activity_Calculation.html"
                        title="next chapter">Map Datasets to KinPred</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/Tutorial/Pruning.md.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="Activity_Calculation.html" title="Map Datasets to KinPred"
             >next</a> |</li>
        <li class="right" >
          <a href="tutorial.html" title="Tutorial"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">KSTAR 1 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="tutorial.html" >Tutorial</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Run pruning within python</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2020, Naegle Lab.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 4.0.1.
    </div>
  </body>
</html>